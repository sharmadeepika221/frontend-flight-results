{"ast":null,"code":"import _classCallCheck from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\tttt\\\\Flight_Search_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\n\n/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016-2020 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { unstable_renderSubtreeIntoContainer // eslint-disable-line camelcase\n, unmountComponentAtNode, findDOMNode } from 'react-dom';\nimport { Component } from 'react';\nimport assign from 'object-assign';\nimport PropTypes from 'prop-types';\nvar KEYCODES = {\n  ESCAPE: 27\n};\n\nvar Portal = /*#__PURE__*/function (_Component) {\n  _inherits(Portal, _Component);\n\n  function Portal() {\n    var _this;\n\n    _classCallCheck(this, Portal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Portal).call(this));\n    _this.portalElement = null; // shouldClose is used to keep track of the user's mouse-down events in order to\n    // prevent the dialog closing if the mouse leaves / enters the portal during the click\n\n    _this.shouldClose = false;\n    _this.close = _this.close.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDocumentMouseUp = _this.onDocumentMouseUp.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDocumentMouseDown = _this.onDocumentMouseDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDocumentKeyDown = _this.onDocumentKeyDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDocumentMouseMove = _this.onDocumentMouseMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getClickEventProperties = _this.getClickEventProperties.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.supportsPassiveEvents = _this.supportsPassiveEvents.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Portal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n\n      if (this.props.targetRef) {\n        this.props.targetRef(this.getTargetElement());\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.isOpen) {\n        if (!prevProps.isOpen) {\n          this.open();\n          return;\n        }\n      } else if (prevProps.isOpen) {\n        if (this.props.beforeClose) {\n          this.props.beforeClose(this.close);\n        } else {\n          this.close();\n        }\n\n        return;\n      }\n\n      this.renderPortal();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.close();\n    }\n  }, {\n    key: \"onDocumentMouseDown\",\n    value: function onDocumentMouseDown(event) {\n      var clickEventProperties = this.getClickEventProperties(event);\n\n      if (clickEventProperties.isNotLeftClick || clickEventProperties.isTargetClick || clickEventProperties.isPortalClick) {\n        this.shouldClose = false;\n        return;\n      }\n\n      this.shouldClose = true;\n    }\n  }, {\n    key: \"onDocumentMouseUp\",\n    value: function onDocumentMouseUp(event) {\n      var clickEventProperties = this.getClickEventProperties(event);\n\n      if (clickEventProperties.isNotLeftClick || clickEventProperties.isTargetClick || clickEventProperties.isPortalClick) {\n        this.shouldClose = false;\n        return;\n      }\n\n      if (this.shouldClose) {\n        this.props.onClose(event, {\n          source: 'DOCUMENT_CLICK'\n        });\n      }\n    }\n  }, {\n    key: \"onDocumentKeyDown\",\n    value: function onDocumentKeyDown(event) {\n      if (event.keyCode === KEYCODES.ESCAPE && this.props.isOpen && this.props.closeOnEscPressed) {\n        this.props.onClose(event, {\n          source: 'ESCAPE'\n        });\n      }\n    }\n  }, {\n    key: \"onDocumentMouseMove\",\n    value: function onDocumentMouseMove() {\n      this.shouldClose = false;\n    }\n  }, {\n    key: \"getClickEventProperties\",\n    value: function getClickEventProperties(event) {\n      var isNotLeftClick = event.button && event.button !== 0;\n      var targetElement = this.getTargetElement();\n      var isTargetClick = targetElement && (event.target === targetElement || targetElement.contains(event.target));\n      var isPortalClick = this.portalElement && (event.target === this.portalElement || this.portalElement.contains(event.target));\n      return {\n        isNotLeftClick: isNotLeftClick,\n        isTargetClick: isTargetClick,\n        isPortalClick: isPortalClick\n      };\n    }\n  }, {\n    key: \"getTargetElement\",\n    value: function getTargetElement() {\n      if (typeof this.props.target === 'function') {\n        return this.props.target();\n      } // Whilst findDOMNode is planned for deprecation in a future implementation of react, since this is the only usage\n      // in backpack, we have decided to ignore this instance as it'll be deleted in favour of React 16 first class portal\n      // implementation (see https://reactjs.org/docs/portals.html).\n      // eslint-disable-next-line react/no-find-dom-node\n\n\n      return this.props.target && findDOMNode(this);\n    }\n  }, {\n    key: \"getRenderTarget\",\n    value: function getRenderTarget() {\n      if (typeof this.props.renderTarget === 'function') {\n        return this.props.renderTarget();\n      }\n\n      return document.body;\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n\n      if (this.portalElement) {\n        return;\n      }\n\n      this.portalElement = document.createElement('div');\n      this.getRenderTarget().appendChild(this.portalElement);\n      var passiveArgs = this.supportsPassiveEvents() ? {\n        passive: true\n      } : false;\n      document.addEventListener('touchstart', this.onDocumentMouseDown, passiveArgs);\n      document.addEventListener('touchmove', this.onDocumentMouseMove, passiveArgs);\n      document.addEventListener('touchend', this.onDocumentMouseUp, passiveArgs);\n      document.addEventListener('mousedown', this.onDocumentMouseDown, false);\n      document.addEventListener('mouseup', this.onDocumentMouseUp, false);\n      document.addEventListener('keydown', this.onDocumentKeyDown, false);\n\n      if (this.props.style) {\n        assign(this.portalElement.style, this.props.style);\n      }\n\n      if (this.props.className) {\n        this.portalElement.className = this.props.className;\n      }\n\n      this.renderPortal(function () {\n        _this2.props.onOpen(_this2.portalElement, _this2.getTargetElement());\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!this.portalElement) {\n        return;\n      }\n\n      unmountComponentAtNode(this.portalElement);\n      var renderTarget = this.getRenderTarget();\n\n      if (renderTarget) {\n        renderTarget.removeChild(this.portalElement);\n      }\n\n      document.removeEventListener('touchstart', this.onDocumentMouseDown);\n      document.removeEventListener('touchmove', this.onDocumentMouseMove);\n      document.removeEventListener('touchend', this.onDocumentMouseUp);\n      document.removeEventListener('mousedown', this.onDocumentMouseDown);\n      document.removeEventListener('mouseup', this.onDocumentMouseUp);\n      document.removeEventListener('keydown', this.onDocumentKeyDown);\n      this.portalElement = null;\n    } // This function is taken from modernizr\n    // See https://github.com/modernizr/modernizr\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: \"supportsPassiveEvents\",\n    value: function supportsPassiveEvents() {\n      var supportsPassiveOption = false;\n\n      try {\n        var opts = Object.defineProperty({}, 'passive', {\n          // eslint-disable-next-line getter-return\n          get: function get() {\n            supportsPassiveOption = true;\n          }\n        });\n        window.addEventListener('test', null, opts);\n      } catch (e) {\n        return false;\n      }\n\n      return supportsPassiveOption;\n    }\n  }, {\n    key: \"renderPortal\",\n    value: function renderPortal() {\n      var _this3 = this;\n\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n      // If the `target` prop is null, it's fine that there is no targetElement\n      // Otherwise, if a `target` is provided, we don't render if we cannot find the respective element\n      var missesExpectedTarget = this.props.target && !this.getTargetElement();\n\n      if (this.portalElement && !missesExpectedTarget) {\n        unstable_renderSubtreeIntoContainer(this, this.props.children, this.portalElement, function () {\n          if (_this3.props.isOpen) {\n            _this3.props.onRender(_this3.portalElement, _this3.getTargetElement());\n          }\n\n          cb();\n        });\n      } else {\n        setImmediate(cb);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return typeof this.props.target === 'function' ? null : this.props.target;\n    }\n  }]);\n\n  return Portal;\n}(Component);\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  beforeClose: PropTypes.func,\n  className: PropTypes.string,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onRender: PropTypes.func,\n  style: PropTypes.object,\n  // eslint-disable-line react/forbid-prop-types\n  renderTarget: PropTypes.func,\n  target: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  targetRef: PropTypes.func,\n  closeOnEscPressed: PropTypes.bool\n};\nPortal.defaultProps = {\n  beforeClose: null,\n  className: null,\n  onClose: function onClose() {\n    return null;\n  },\n  onOpen: function onOpen() {\n    return null;\n  },\n  onRender: function onRender() {\n    return null;\n  },\n  style: null,\n  renderTarget: null,\n  target: null,\n  targetRef: null,\n  closeOnEscPressed: true\n};\nexport default Portal;","map":{"version":3,"sources":["C:/tttt/Flight_Search_FE/node_modules/bpk-react-utils/src/Portal.js"],"names":["unstable_renderSubtreeIntoContainer","unmountComponentAtNode","findDOMNode","Component","assign","PropTypes","KEYCODES","ESCAPE","Portal","portalElement","shouldClose","close","bind","onDocumentMouseUp","onDocumentMouseDown","onDocumentKeyDown","onDocumentMouseMove","getClickEventProperties","supportsPassiveEvents","props","isOpen","open","targetRef","getTargetElement","prevProps","beforeClose","renderPortal","event","clickEventProperties","isNotLeftClick","isTargetClick","isPortalClick","onClose","source","keyCode","closeOnEscPressed","button","targetElement","target","contains","renderTarget","document","body","createElement","getRenderTarget","appendChild","passiveArgs","passive","addEventListener","style","className","onOpen","removeChild","removeEventListener","supportsPassiveOption","opts","Object","defineProperty","get","window","e","cb","missesExpectedTarget","children","onRender","setImmediate","propTypes","node","isRequired","bool","func","string","object","oneOfType","defaultProps"],"mappings":"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","sourcesContent":["/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016-2020 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  unstable_renderSubtreeIntoContainer, // eslint-disable-line camelcase\n  unmountComponentAtNode,\n  findDOMNode,\n} from 'react-dom';\nimport { Component } from 'react';\nimport assign from 'object-assign';\nimport PropTypes from 'prop-types';\n\nconst KEYCODES = {\n  ESCAPE: 27,\n};\n\nclass Portal extends Component {\n  constructor() {\n    super();\n\n    this.portalElement = null;\n\n    // shouldClose is used to keep track of the user's mouse-down events in order to\n    // prevent the dialog closing if the mouse leaves / enters the portal during the click\n    this.shouldClose = false;\n\n    this.close = this.close.bind(this);\n    this.onDocumentMouseUp = this.onDocumentMouseUp.bind(this);\n    this.onDocumentMouseDown = this.onDocumentMouseDown.bind(this);\n    this.onDocumentKeyDown = this.onDocumentKeyDown.bind(this);\n    this.onDocumentMouseMove = this.onDocumentMouseMove.bind(this);\n    this.getClickEventProperties = this.getClickEventProperties.bind(this);\n    this.supportsPassiveEvents = this.supportsPassiveEvents.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.isOpen) {\n      this.open();\n    }\n\n    if (this.props.targetRef) {\n      this.props.targetRef(this.getTargetElement());\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen) {\n      if (!prevProps.isOpen) {\n        this.open();\n        return;\n      }\n    } else if (prevProps.isOpen) {\n      if (this.props.beforeClose) {\n        this.props.beforeClose(this.close);\n      } else {\n        this.close();\n      }\n      return;\n    }\n\n    this.renderPortal();\n  }\n\n  componentWillUnmount() {\n    this.close();\n  }\n\n  onDocumentMouseDown(event) {\n    const clickEventProperties = this.getClickEventProperties(event);\n    if (\n      clickEventProperties.isNotLeftClick ||\n      clickEventProperties.isTargetClick ||\n      clickEventProperties.isPortalClick\n    ) {\n      this.shouldClose = false;\n      return;\n    }\n\n    this.shouldClose = true;\n  }\n\n  onDocumentMouseUp(event) {\n    const clickEventProperties = this.getClickEventProperties(event);\n\n    if (\n      clickEventProperties.isNotLeftClick ||\n      clickEventProperties.isTargetClick ||\n      clickEventProperties.isPortalClick\n    ) {\n      this.shouldClose = false;\n      return;\n    }\n\n    if (this.shouldClose) {\n      this.props.onClose(event, { source: 'DOCUMENT_CLICK' });\n    }\n  }\n\n  onDocumentKeyDown(event) {\n    if (\n      event.keyCode === KEYCODES.ESCAPE &&\n      this.props.isOpen &&\n      this.props.closeOnEscPressed\n    ) {\n      this.props.onClose(event, { source: 'ESCAPE' });\n    }\n  }\n\n  onDocumentMouseMove() {\n    this.shouldClose = false;\n  }\n\n  getClickEventProperties(event) {\n    const isNotLeftClick = event.button && event.button !== 0;\n\n    const targetElement = this.getTargetElement();\n    const isTargetClick =\n      targetElement &&\n      (event.target === targetElement || targetElement.contains(event.target));\n\n    const isPortalClick =\n      this.portalElement &&\n      (event.target === this.portalElement ||\n        this.portalElement.contains(event.target));\n\n    return {\n      isNotLeftClick,\n      isTargetClick,\n      isPortalClick,\n    };\n  }\n\n  getTargetElement() {\n    if (typeof this.props.target === 'function') {\n      return this.props.target();\n    }\n\n    // Whilst findDOMNode is planned for deprecation in a future implementation of react, since this is the only usage\n    // in backpack, we have decided to ignore this instance as it'll be deleted in favour of React 16 first class portal\n    // implementation (see https://reactjs.org/docs/portals.html).\n    // eslint-disable-next-line react/no-find-dom-node\n    return this.props.target && findDOMNode(this);\n  }\n\n  getRenderTarget() {\n    if (typeof this.props.renderTarget === 'function') {\n      return this.props.renderTarget();\n    }\n\n    return document.body;\n  }\n\n  open() {\n    if (this.portalElement) {\n      return;\n    }\n\n    this.portalElement = document.createElement('div');\n    this.getRenderTarget().appendChild(this.portalElement);\n\n    const passiveArgs = this.supportsPassiveEvents()\n      ? { passive: true }\n      : false;\n    document.addEventListener(\n      'touchstart',\n      this.onDocumentMouseDown,\n      passiveArgs,\n    );\n    document.addEventListener(\n      'touchmove',\n      this.onDocumentMouseMove,\n      passiveArgs,\n    );\n    document.addEventListener('touchend', this.onDocumentMouseUp, passiveArgs);\n    document.addEventListener('mousedown', this.onDocumentMouseDown, false);\n    document.addEventListener('mouseup', this.onDocumentMouseUp, false);\n    document.addEventListener('keydown', this.onDocumentKeyDown, false);\n\n    if (this.props.style) {\n      assign(this.portalElement.style, this.props.style);\n    }\n\n    if (this.props.className) {\n      this.portalElement.className = this.props.className;\n    }\n\n    this.renderPortal(() => {\n      this.props.onOpen(this.portalElement, this.getTargetElement());\n    });\n  }\n\n  close() {\n    if (!this.portalElement) {\n      return;\n    }\n\n    unmountComponentAtNode(this.portalElement);\n\n    const renderTarget = this.getRenderTarget();\n    if (renderTarget) {\n      renderTarget.removeChild(this.portalElement);\n    }\n\n    document.removeEventListener('touchstart', this.onDocumentMouseDown);\n    document.removeEventListener('touchmove', this.onDocumentMouseMove);\n    document.removeEventListener('touchend', this.onDocumentMouseUp);\n    document.removeEventListener('mousedown', this.onDocumentMouseDown);\n    document.removeEventListener('mouseup', this.onDocumentMouseUp);\n    document.removeEventListener('keydown', this.onDocumentKeyDown);\n\n    this.portalElement = null;\n  }\n\n  // This function is taken from modernizr\n  // See https://github.com/modernizr/modernizr\n  // eslint-disable-next-line class-methods-use-this\n  supportsPassiveEvents() {\n    let supportsPassiveOption = false;\n    try {\n      const opts = Object.defineProperty({}, 'passive', {\n        // eslint-disable-next-line getter-return\n        get() {\n          supportsPassiveOption = true;\n        },\n      });\n      window.addEventListener('test', null, opts);\n    } catch (e) {\n      return false;\n    }\n    return supportsPassiveOption;\n  }\n\n  renderPortal(cb = () => {}) {\n    // If the `target` prop is null, it's fine that there is no targetElement\n    // Otherwise, if a `target` is provided, we don't render if we cannot find the respective element\n    const missesExpectedTarget = this.props.target && !this.getTargetElement();\n\n    if (this.portalElement && !missesExpectedTarget) {\n      unstable_renderSubtreeIntoContainer(\n        this,\n        this.props.children,\n        this.portalElement,\n        () => {\n          if (this.props.isOpen) {\n            this.props.onRender(this.portalElement, this.getTargetElement());\n          }\n          cb();\n        },\n      );\n    } else {\n      setImmediate(cb);\n    }\n  }\n\n  render() {\n    return typeof this.props.target === 'function' ? null : this.props.target;\n  }\n}\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  beforeClose: PropTypes.func,\n  className: PropTypes.string,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onRender: PropTypes.func,\n  style: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  renderTarget: PropTypes.func,\n  target: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  targetRef: PropTypes.func,\n  closeOnEscPressed: PropTypes.bool,\n};\n\nPortal.defaultProps = {\n  beforeClose: null,\n  className: null,\n  onClose: () => null,\n  onOpen: () => null,\n  onRender: () => null,\n  style: null,\n  renderTarget: null,\n  target: null,\n  targetRef: null,\n  closeOnEscPressed: true,\n};\n\nexport default Portal;\n"]},"metadata":{},"sourceType":"module"}